<html>
  <head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <div id="rectangle" style="background-color: f4f6f9; padding: 1rem;">
      <h1>Job Matcher</h1>
      <form id="uploadForm" enctype="multipart/form-data">
        <label for="resume">Enter your pdf resume:</label>
        <input type="file" id="resume" name="resume" accept="application/pdf" />
        <br>
        <br>
        <label for="salary">Minumum Salary: $</label>
        <input type="number" id="salary" name="salary" min="0" max="10000000" />
        <br>
        <br>
        <div>
          <label for="city">Your city:</label>
          <input type="text" id="city" name="city" />
          <label for="city">Your state(abbreviation):</label>
          <input type="text" id="state" name="state" style="width: 40px;" />
          <label for="miles">Miles away:</label>
          <input type="number" id="miles" name="miles" min="0" max="10000" />
        </div>
        <p>Only entry level searches:</p>
        <input type="radio" id="yes" value="yes" name="yes_or_no">
        <label for="yes">Yes</label>
        <br>
        <input type="radio" id="no" value="no" name="yes_or_no">
        <label for="no">No</label>
        <br><br>
        <label for="entries">Number of entries (1-20):</label>
        <input type="number" id="entries" name="entries" min="1" max="20" />
        <br>
        <br>
        <button id="searchButton", type="button">Search</button>
      </form>

      <h3>Job Results:</h3>
      <p id="responseArea"></p>
    </div>

    <script>
        document.getElementById("searchButton").addEventListener("click", async () => {
            const formData = new FormData();
            formData.append("resume", document.getElementById("resume").files[0]);
            formData.append("salary", document.getElementById("salary").value);
            formData.append("city", document.getElementById("city").value);
            formData.append("state", document.getElementById("state").value);
            formData.append("miles", document.getElementById("miles").value);
            formData.append("yes_or_no", document.querySelector('input[name="yes_or_no"]:checked').value);
            formData.append("entries", document.getElementById("entries").value);

            const res = await fetch("/jobs", {
                method: "POST",
                body: formData
            });

            const data = await res.json();
            document.getElementById("responseArea").innerHTML = data.message;

        }, false);
    </script>

  </body>
</html>
